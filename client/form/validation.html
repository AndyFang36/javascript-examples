<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8">
    <title>H5表单验证</title>
  </head>
  <body>
    <form>
      <div>
        <label>
          用户名：
          <input type="text" id="txtName" placeholder="请输入用户名" required="" pattern="[A-Za-z][0-9A-Za-z]{3,15}"/>
        </label>
      </div>
      <div>
        <label>
          密码：
          <input type="password" id="txtPassword" placeholder="请输入密码" required="" pattern="\d{6}"/>
        </label>
      </div>
      <button>登录</button>
    </form>
    <script type="text/javascript">
        window.onload = function () {
            const txtName = document.querySelector('#txtName');
            const txtPassword = document.querySelector('#txtPassword');
            //监听oninvalid 和oninput 事件
            txtName.oninvalid = checkUserName;
            txtName.oninput = checkUserName;

            function checkUserName() {
                if (this.validity.valueMissing) { //validity对象相关属性
                    this.setCustomValiduty('用户名不能为空');
                } else if (this.validity.patternMismatch) {
                    this.setCustomValidity('用户名格式无效，必须....');
                } else {
                    this.setCustomValidity('');
                }
            }

            txtPassword.oninvalid = checkPassword;
            txtPassword.oninput = checkPassword;

            function checkPassword() {
                if (this.validity.valueMissing) {
                    this.setCustomValidity('密码不能为空.');
                } else if (this.validity.patternMismatch) {
                    this.setCustomValidity('密码必须为6位数字.');
                } else {
                    this.setCustomValidity('');
                }
            }
        }
    </script>
  </body>
</html>